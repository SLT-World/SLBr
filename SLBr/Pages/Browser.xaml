<UserControl x:Class="SLBr.Pages.Browser"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:SLBr.Pages"
             xmlns:SLBr="clr-namespace:SLBr"
             xmlns:WinUI="clr-namespace:WinUI"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" GotFocus="Browser_GotFocus" Loaded="Browser_Loaded">
    <UserControl.Resources>
        <ResourceDictionary Source="../WinUIStyleDictionary.xaml"/>
    </UserControl.Resources>
    <Grid Background="{StaticResource SecondaryBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Border x:Name="ToolBar" Background="{StaticResource PrimaryBrush}" Grid.ColumnSpan="3" Grid.Row="0" BorderThickness="0,1,0,0" BorderBrush="{StaticResource BorderBrush}" HorizontalAlignment="Stretch">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <DockPanel x:Name="ToolBarPanel" Grid.Row="0" Margin="5,5,0,0">
                    <Button Visibility="Collapsed" Click="ButtonAction" BorderThickness="0" Tag="55" x:Name="CompactTabButton" ToolTip="Toggle Compact Tabs" Content="&#xe90c;" Margin="0,0,5,0" Style="{StaticResource ToolBarIconButton}"/>
                    <WinUI:DropDownButton ToolTip="Options" BorderThickness="0" Content="&#xE712;" Margin="0,0,5,0" Style="{StaticResource DropDownIconButton}" DockPanel.Dock="Left" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <WinUI:DropDownButton.Menu>
                            <ContextMenu>
                                <MenuItem Visibility="Collapsed" Icon="&#xea6a;" Header="New Update" x:Name="NewUpdateMenu" Foreground="Orange" Click="UpdateSLBr"/>
                                <Separator Visibility="Collapsed" x:Name="NewUpdateMenuSeparator"/>
                                <MenuItem Icon="&#xEC6C;" Header="New Tab" Click="ButtonAction" Tag="5&lt;,&gt;{Homepage}"/>
                                <MenuItem Icon="&#xE727;" Header="New Private Tab" Click="ButtonAction" Tag="5&lt;,&gt;slbr://newtab&lt;,&gt;Private"/>
                                <MenuItem Icon="&#xe737;" Header="New Window" Click="ButtonAction" Tag="7"/>
                                <Separator/>
                                <MenuItem Icon="&#xE81C;" Header="History">
                                    <MenuItem.ItemsSource>
                                        <CompositeCollection>
                                            <MenuItem Header="History" Icon="&#xe9a4;" Tag="5&lt;,&gt;slbr://history/"/>
                                            <Separator/>
                                            <CollectionContainer x:Name="HistoryListMenu"/>
                                        </CompositeCollection>
                                    </MenuItem.ItemsSource>
                                    <MenuItem.ItemContainerStyle>
                                        <Style TargetType="MenuItem">
                                            <Setter Property="Icon" Value="&#xEB41;" />
                                            <Setter Property="Header" Value="{Binding Tooltip}" />
                                            <Setter Property="Tag" Value="{Binding Arguments}" />
                                            <EventSetter Event="Click" Handler="ButtonAction" />
                                        </Style>
                                    </MenuItem.ItemContainerStyle>
                                </MenuItem>
                                <MenuItem Icon="&#xE896;" Header="Downloads" Click="ButtonAction" Tag="5&lt;,&gt;slbr://downloads/"/>
                                <MenuItem Icon="&#xEB51;" x:Name="FavouriteListMenu" Header="Favourites">
                                    <MenuItem.ItemContainerStyle>
                                        <Style TargetType="MenuItem">
                                            <Setter Property="Icon" Value="&#xEB51;"/>
                                            <Setter Property="Header" Value="{Binding Name}"/>
                                            <Setter Property="Tag" Value="{Binding Arguments}"/>
                                            <Setter Property="ToolTip" Value="{Binding Tooltip}"/>
                                            <EventSetter Event="Click" Handler="ButtonAction"/>
                                        </Style>
                                    </MenuItem.ItemContainerStyle>
                                </MenuItem>
                                <!--<MenuItem Icon="&#xea86;" x:Name="ExtensionListMenu" Header="Extensions">
                                    <MenuItem.ItemContainerStyle>
                                        <Style TargetType="MenuItem">
                                            <Setter Property="Header" Value="{Binding Name}"/>
                                            <Setter Property="Tag" Value="{Binding Arguments}"/>
                                            <Setter Property="ToolTip" Value="{Binding Tooltip}"/>
                                            <EventSetter Event="Click" Handler="ButtonAction"/>
                                        </Style>
                                    </MenuItem.ItemContainerStyle>
                                </MenuItem>-->
                                <Separator/>
                                <MenuItem Icon="&#xE749;" Header="Print" Click="ButtonAction" Tag="30"/>
                                <MenuItem Icon="&#xE773;" Header="Find" Click="ButtonAction" Tag="32" InputGestureText="Ctrl+F"/>
                                <MenuItem x:Name="MuteMenuItem" Icon="&#xe74f;" Header="Mute" Click="ButtonAction" Tag="31"/>
                                <!--<MenuItem Icon="&#xe71e;" Header="Zoom" Click="ButtonAction" Tag="31">
                                    <MenuItem Icon="&#xe8a3;" Header="Zoom in" Click="ButtonAction" Tag="40"/>
                                    <MenuItem Icon="&#xe71f;" Header="Zoom out" Click="ButtonAction" Tag="41"/>
                                    <MenuItem Icon="&#xe72c;" Header="Reset" Click="ButtonAction" Tag="42"/>
                                </MenuItem>-->
                                <MenuItem Header="Tools" Icon="&#xe821;">
                                    <MenuItem Header="Create QR Code" Icon="&#xed14;" Click="ButtonAction" Tag="57&lt;,&gt;0"/>
                                    <MenuItem Header="Reader Mode" Icon="&#xF000;" Click="ButtonAction" Tag="17"/>
                                    <MenuItem Header="News Feed" Icon="&#xe8a1;" Click="ButtonAction" Tag="23"/>
                                    <Separator/>
                                    <MenuItem Header="Developer Tools" Icon="&#xec7a;" Click="ButtonAction" Tag="9" InputGestureText="F12"/>
                                    <MenuItem Header="Tests" Icon="&#xebe8;">
                                        <MenuItem Header="HTML5 Test" Icon="&#xe81e;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.html5test.co/"/>
                                        <MenuItem Header="CSS3 Test" Icon="&#xf4a5;" Click="ButtonAction" Tag="4&lt;,&gt;https://css3test.com/"/>
                                        <MenuItem Header="SafeBrowsing" Icon="&#xe705;" Click="ButtonAction" Tag="4&lt;,&gt;https://testsafebrowsing.appspot.com/"/>
                                        <MenuItem Header="SmartScreen" Icon="&#xe705;" Click="ButtonAction" Tag="4&lt;,&gt;https://demo.smartscreen.msft.net/"/>
                                        <MenuItem Header="WebRTC" Icon="&#xe714;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.webrtc-experiment.com/"/>
                                        <MenuItem Header="Web Speech API" Icon="&#xefa9;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/intl/en/chrome/demos/speech.html"/>
                                        <MenuItem Header="Web Notifications" Icon="&#xea8f;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.bennish.net/web-notifications.html"/>
                                        <MenuItem Header="WebGL" Icon="&#xf158;" Click="ButtonAction" Tag="4&lt;,&gt;https://get.webgl.org/"/>
                                        <MenuItem Header="WebAssembly" Icon="&#xe7b8;" Click="ButtonAction" Tag="4&lt;,&gt;https://webassembly.org/features/"/>
                                        <MenuItem Header="Jigsaw" Icon="&#xe774;" Click="ButtonAction" Tag="4&lt;,&gt;https://jigsaw.w3.org/"/>
                                        <MenuItem Header="BrowserLeaks" Icon="&#xe9d5;" Click="ButtonAction" Tag="4&lt;,&gt;https://browserleaks.com/"/>
                                        <MenuItem Header="Permissions" Icon="&#xe8d7;" Click="ButtonAction" Tag="4&lt;,&gt;https://permission.site/"/>
                                        <MenuItem Header="Acid3" Icon="&#xe9d2;" Click="ButtonAction" Tag="4&lt;,&gt;http://acid3.acidtests.org/"/>
                                        <MenuItem Header="QUIC" Icon="&#xf159;" Click="ButtonAction" Tag="4&lt;,&gt;https://quic.nginx.org/"/>
                                        <MenuItem Header="Bad SSL" Icon="&#xe785;" Click="ButtonAction" Tag="4&lt;,&gt;https://badssl.com/"/>
                                        <MenuItem Header="Stutters &amp; Tearing" Icon="&#xe9d9;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.testufo.com/stutter"/>
                                        <MenuItem Header="Widevine" Icon="&#xe8a6;" Click="ButtonAction" Tag="4&lt;,&gt;https://bitmovin.com/demos/drm/"/>
                                        <MenuItem Header="Service Worker" Icon="&#xec7a;" Click="ButtonAction" Tag="4&lt;,&gt;https://googlechrome.github.io/samples/service-worker/basic/"/>
                                        <MenuItem Header="Prerender" Icon="&#xe8ff;" Click="ButtonAction" Tag="4&lt;,&gt;https://prerender-demos.glitch.me/"/>
                                        <MenuItem Header="SLT Tests" Icon="&#xe9a4;" Click="ButtonAction" Tag="4&lt;,&gt;https://slt-world.github.io/"/>
                                        <Separator/>
                                        <MenuItem Header="WebGL Samples" Icon="&#xec26;">
                                            <MenuItem Header="HexGL" Icon="&#xe709;" Click="ButtonAction" Tag="4&lt;,&gt;https://hexgl.bkcore.com/"/>
                                            <MenuItem Header="Book" Icon="&#xf582;" Click="ButtonAction" Tag="4&lt;,&gt;https://webglsamples.org/book/book.html"/>
                                            <MenuItem Header="Interactive Water" Icon="&#xeb42;" Click="ButtonAction" Tag="4&lt;,&gt;https://madebyevan.com/webgl-water/"/>
                                            <MenuItem Header="Aquarium" Click="ButtonAction" Tag="4&lt;,&gt;https://webglsamples.org/aquarium/aquarium.html"/>
                                        </MenuItem>
                                    </MenuItem>
                                    <Separator/>
                                    <MenuItem Header="Interesting Sites" Icon="&#xeb41;">
                                        <MenuItem Header="SLBr Tetris" Icon="&#xe74c;" Click="ButtonAction" Tag="4&lt;,&gt;slbr://tetris/"/>
                                        <MenuItem Header="Pointer Pointer" Icon="&#xe7c9;" Click="ButtonAction" Tag="4&lt;,&gt;pointerpointer.com"/>
                                        <MenuItem Header="Bouncing DVD Logo" Icon="&#xe7c4;" Click="ButtonAction" Tag="4&lt;,&gt;www.bouncingdvdlogo.com"/>
                                        <MenuItem Header="Take b1nzy to space" Icon="&#xe709;" Click="ButtonAction" Tag="4&lt;,&gt;https://takeb1nzyto.space/"/>
                                        <MenuItem Header="Old Net Navigator" Icon="&#xec6c;" Click="ButtonAction" Tag="4&lt;,&gt;https://theoldnet.com/browser/"/>
                                        <MenuItem Header="Passive Aggressive Passwords" Icon="&#xe8d7;" Click="ButtonAction" Tag="4&lt;,&gt;https://trypap.com/"/>
                                        <MenuItem Header="🐮" Icon="&#xe767;" Click="ButtonAction" Tag="4&lt;,&gt;https://xn--2o8h.ws/"/>
                                        <MenuItem Header="Endless Horse" Click="ButtonAction" Tag="4&lt;,&gt;http://endless.horse/"/>
                                        <MenuItem Header="CO2GLE" Click="ButtonAction" Tag="4&lt;,&gt;https://www.janavirgin.com/CO2/"/>
                                        <MenuItem Header="Deforest" Click="ButtonAction" Tag="4&lt;,&gt;https://www.janavirgin.com/CO2/DEFOOOOOOOOOOOOOOOOOOOOOREST.html"/>
                                    </MenuItem>
                                    <MenuItem Header="Google">
                                        <MenuItem Header="I'm a teapot" Icon="&#xEC32;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/teapot"/>
                                        <MenuItem Header="PAC-MAN" Icon="&#xe91f;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/logos/2010/pacman10-i.html"/>
                                        <Separator/>
                                        <MenuItem Header="Do a barrel roll" Icon="&#xe895;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/search?q=Do+a+barrel+roll"/>
                                        <MenuItem Header="Askew" Icon="&#xe7ad;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/search?q=Askew"/>
                                        <MenuItem Header="Blink HTML" Icon="&#xe7b3;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/search?q=Blink+HTML"/>
                                        <MenuItem Header="Festivus" Icon="&#xe784;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/search?q=Festivus"/>
                                        <MenuItem Header="Google in 1998" Icon="&#xe81c;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/search?q=Google+in+1998"/>
                                        <MenuItem Header="What sound does a dog make?" Icon="&#xe767;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/search?q=What+sound+does+a+dog+make"/>
                                        <!--<MenuItem Header="1.2+​(sqrt(​1-​sqrt(​x^​2+​y^​2)^​2)+​1-​x^​2-​y^​2)*​(sin(​10000*​(x*​3+​y/​5+​7))+​1/​4)" Icon="&#xe8ef;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/search?q=1.2%2B(sqrt(1-(sqrt(x%5E2%2By%5E2))%5E2)+%2B+1+-+x%5E2-y%5E2)+*+(sin+(10000+*+(x*3%2By/5%2B7))%2B1/4)+from+-1.6+to+1.6"/>-->
                                        <Separator/>
                                        <MenuItem Header="Google Moon" Icon="&#xe708;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/maps/space/moon/"/>
                                        <MenuItem Header="Google Mars" Icon="&#xea3a;" Click="ButtonAction" Tag="4&lt;,&gt;https://www.google.com/maps/space/mars/"/>
                                    </MenuItem>
                                </MenuItem>
                                <Separator/>
                                <MenuItem Icon="&#xE748;" Header="Switch User" Click="ButtonAction" Tag="15"/>
                                <MenuItem Icon="&#xE713;" Header="Settings" Click="ButtonAction" Tag="5&lt;,&gt;slbr://settings"/>
                                <Separator/>
                                <MenuItem Header="Exit" Click="ButtonAction" Tag="0"/>
                            </ContextMenu>
                        </WinUI:DropDownButton.Menu>
                    </WinUI:DropDownButton>
                    <Button Click="ButtonAction" BorderThickness="0" Tag="1" x:Name="BackButton" ToolTip="Back" Content="&#xE76B;" Margin="0,0,5,0" Style="{StaticResource ToolBarIconButton}"/>
                    <Button Click="ButtonAction" BorderThickness="0" Tag="2" x:Name="ForwardButton" ToolTip="Forward" Content="&#xE76C;" Margin="0,0,5,0" Style="{StaticResource ToolBarIconButton}"/>
                    <Button ContextMenuService.Placement="Bottom" Click="ButtonAction" BorderThickness="0" Tag="3" x:Name="ReloadButton" ToolTip="Refresh" Content="&#xE72C;" Margin="0,0,5,0" Style="{StaticResource ToolBarIconButton}">
                        <Button.ContextMenu>
                            <ContextMenu OverridesDefaultStyle="False">
                                <MenuItem Icon="&#xE72C;" Header="Normal Reload" Click="ButtonAction" Tag="3"/>
                                <Separator/>
                                <MenuItem Icon="&#xE9F3;" Header="Hard Reload" Click="ButtonAction" Tag="50"/>
                                <MenuItem Icon="&#xE8F7;" Header="Empty Cache &amp; Hard Reload" Click="ButtonAction" Tag="51"/>
                            </ContextMenu>
                        </Button.ContextMenu>
                    </Button>

                    <Button Click="ButtonAction" BorderThickness="0" Tag="4&lt;,&gt;{Homepage}" x:Name="HomeButton" Content="&#xE80F;" Margin="0,0,5,0" Style="{StaticResource ToolBarIconButton}" ToolTip="Home"/>

                    <WinUI:PopupButton BorderThickness="0" x:Name="OpenDownloadsButton" ToolTip="Downloads" Content="&#xE896;" Margin="0,0,5,0" Style="{StaticResource ToolBarPopupIconButton}" DockPanel.Dock="Right">
                        <WinUI:PopupButton.PopupContent>
                            <Border Width="250" Background="{StaticResource PrimaryBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="5" Padding="5,2.5">
                                <StackPanel>
                                    <ItemsControl x:Name="DownloadsPopup">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Margin="0,2.5" Background="{StaticResource PrimaryBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="5" Padding="5">
                                                    <StackPanel>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="35"/>
                                                                <ColumnDefinition/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>
                                                            <Border Width="30" Height="30" Margin="0,0,5,0" BorderThickness="1" BorderBrush="{DynamicResource BorderBrush}" CornerRadius="5">
                                                                <TextBlock Text="{Binding Icon}" Margin="0" FontSize="18" FontWeight="UltraLight" VerticalAlignment="Center" TextAlignment="Center" HorizontalAlignment="Center" FontFamily="{StaticResource IconFontFamily}"/>
                                                            </Border>
                                                            <Grid Grid.Column="1" VerticalAlignment="Center">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition/>
                                                                    <RowDefinition/>
                                                                </Grid.RowDefinitions>
                                                                <TextBlock Text="{Binding FileName}" TextTrimming="CharacterEllipsis"/>
                                                                <TextBlock Grid.Row="1" Text="{Binding FormattedProgress}" FontSize="10" Foreground="{StaticResource GrayBrush}"/>
                                                            </Grid>
                                                            <Button Grid.Column="2" Width="65" Height="30" Click="DownloadCancelButton_Click" Tag="{Binding ID}" Visibility="{Binding Stop}">
                                                                <DockPanel VerticalAlignment="Center">
                                                                    <TextBlock Text="&#xE71A;" Margin="0,0,5,0" HorizontalAlignment="Left" VerticalAlignment="Center" FontFamily="{StaticResource IconFontFamily}" FontSize="16"/>
                                                                    <TextBlock TextAlignment="Center" Text="Cancel" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </DockPanel>
                                                            </Button>
                                                            <Button Grid.Column="2" Width="65" Height="30" Click="DownloadOpenButton_Click" Tag="{Binding ID}" Visibility="{Binding Open}">
                                                                <DockPanel VerticalAlignment="Center">
                                                                    <TextBlock Text="&#xE838;" Margin="0,0,5,0" HorizontalAlignment="Left" VerticalAlignment="Center" FontFamily="{StaticResource IconFontFamily}" FontSize="16"/>
                                                                    <TextBlock TextAlignment="Center" Text="Open" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </DockPanel>
                                                            </Button>
                                                        </Grid>
                                                        <ProgressBar IsIndeterminate="{Binding IsIndeterminate}" Margin="0,5,0,0" Width="Auto" Maximum="100" Visibility="{Binding Progress}" Value="{Binding PercentComplete}"/>
                                                    </StackPanel>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                    <!--<Border Margin="0,2.5" Background="{StaticResource PrimaryBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="5" Padding="5">
                                        <StackPanel>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="35"/>
                                                    <ColumnDefinition/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <Border Width="30" Height="30" Visibility="Visible" Margin="0,0,5,0" BorderThickness="1" BorderBrush="{DynamicResource BorderBrush}" CornerRadius="5">
                                                    <TextBlock Text="&#xE8A5;" Margin="0" FontSize="18" FontWeight="UltraLight" VerticalAlignment="Center" TextAlignment="Center" HorizontalAlignment="Center" FontFamily="{StaticResource IconFontFamily}"/>
                                                </Border>
                                                <Grid Grid.Column="1" VerticalAlignment="Center">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition/>
                                                        <RowDefinition/>
                                                    </Grid.RowDefinitions>
                                                    <TextBlock Text="Chwefwefwefewrome.exe"/>
                                                    <TextBlock Grid.Row="1" Text="41.4/82.8 MB" FontSize="10" Foreground="{StaticResource GrayBrush}"/>
                                                </Grid>
                                                <Button Grid.Column="2" Width="75px" Click="">
                                                    <DockPanel VerticalAlignment="Center">
                                                        <TextBlock Text="&#xE71A;" Margin="0,0,5,0" HorizontalAlignment="Left" VerticalAlignment="Center" FontFamily="{StaticResource IconFontFamily}" FontSize="16"/>
                                                        <TextBlock TextAlignment="Center" Text="Cancel" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </DockPanel>
                                                </Button>
                                                <Button Grid.Column="2" Width="75px" Click="">
                                                    <DockPanel VerticalAlignment="Center">
                                                        <TextBlock Text="&#xE838;" Margin="0,0,5,0" HorizontalAlignment="Left" VerticalAlignment="Center" FontFamily="{StaticResource IconFontFamily}" FontSize="16"/>
                                                        <TextBlock TextAlignment="Center" Text="Open" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </DockPanel>
                                                </Button>
                                            </Grid>
                                            <ProgressBar Margin="0,5,0,0" Width="Auto" Maximum="100" Value="50"/>
                                        </StackPanel>
                                    </Border>-->
                                </StackPanel>
                            </Border>
                        </WinUI:PopupButton.PopupContent>
                    </WinUI:PopupButton>
                    <Grid DockPanel.Dock="Right" Margin="0,0,5,0" x:Name="WebEngineButton">
                        <WinUI:DropDownButton BorderThickness="0" Tag="3" DockPanel.Dock="Right" Style="{StaticResource DropDownIconButton}" ToolTip="Switch Web Engine" Content="&#xec6c;">
                            <WinUI:DropDownButton.Menu>
                                <ContextMenu Width="250">
                                    <MenuItem Icon="&#xe713;" Header="Default" Click="ButtonAction" Tag="58&lt;,&gt;-1"/>
                                    <Separator/>
                                    <MenuItem Icon="&#x2600;" Header="Chromium (CEF)" Click="ButtonAction" Tag="58&lt;,&gt;0"/>
                                    <MenuItem Icon="&#x2601;" Header="Edge (WebView2)" Click="ButtonAction" Tag="58&lt;,&gt;1"/>
                                    <MenuItem Icon="&#x2602;" Header="Internet Explorer (Trident)" Click="ButtonAction" Tag="58&lt;,&gt;2"/>
                                </ContextMenu>
                            </WinUI:DropDownButton.Menu>
                        </WinUI:DropDownButton>
                        <Border Background="{StaticResource PrimaryBrush}" Width="10" Height="5" IsHitTestVisible="False"/>
                        <TextBlock x:Name="WebEngineButtonIcon" Text="&#x2600;" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="7.5" FontSize="10" FontFamily="pack://application:,,,/SLBr;component/Fonts/#SLBr Icons" IsHitTestVisible="False" Background="{StaticResource PrimaryBrush}"/>
                    </Grid>
                    <WinUI:PopupButton Click="ButtonAction" Tag="57&lt;,&gt;0" BorderThickness="0" x:Name="QRButton" ToolTip="Create QR Code" Content="&#xed14;" Margin="0,0,5,0" Style="{StaticResource ToolBarPopupIconButton}" DockPanel.Dock="Right">
                        <WinUI:PopupButton.PopupContent>
                            <Border Width="250" Background="{StaticResource PrimaryBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="5" Padding="10">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <DockPanel Grid.ColumnSpan="2" Margin="0,0,0,10" Height="Auto">
                                        <TextBlock FontSize="18" FontFamily="{StaticResource IconFontFamily}" Margin="0,0,5,0">&#xee6f;</TextBlock>
                                        <Label Margin="0" Padding="0" FontWeight="Medium" FontSize="14">Scan QR Code</Label>
                                    </DockPanel>
                                    <Grid Height="230" Grid.ColumnSpan="2" Grid.Row="1" Margin="0,0,0,10">
                                        <Image x:Name="QRImage" Stretch="Uniform" RenderOptions.BitmapScalingMode="Fant">
                                            <Image.OpacityMask>
                                                <VisualBrush>
                                                    <VisualBrush.Visual>
                                                        <Border CornerRadius="5" Background="White" Width="230" Height="230"/>
                                                    </VisualBrush.Visual>
                                                </VisualBrush>
                                            </Image.OpacityMask>
                                        </Image>
                                    </Grid>
                                    <Button Click="ButtonAction" Grid.Column="0" Margin="0,0,5,0" Width="Auto" Tag="57&lt;,&gt;1" Grid.Row="2">Copy</Button>
                                    <Button Click="ButtonAction" Grid.Column="1" Margin="5,0,0,0" Width="Auto" Tag="57&lt;,&gt;2" Grid.Row="2">Download</Button>
                                </Grid>
                            </Border>
                        </WinUI:PopupButton.PopupContent>
                    </WinUI:PopupButton>
                    <!--<Button Click="ButtonAction" BorderThickness="0" Visibility="Visible" Tag="" DockPanel.Dock="Right" Margin="0,0,5,0" Style="{StaticResource ToolBarIconButton}" ToolTip="Youtube Ultilities" Content="&#xe786;" Foreground="Red"/>-->
                    <WinUI:DropDownButton BorderThickness="0" Tag="3" x:Name="ExtensionsButton" DockPanel.Dock="Right" Margin="0,0,5,0" Style="{StaticResource DropDownIconButton}" ToolTip="Extensions" Content="&#xEA86;">
                        <WinUI:DropDownButton.Menu>
                            <ContextMenu Width="250" x:Name="ExtensionsMenu">
                                <!--<ContextMenu.ItemsSource>
                                    <CompositeCollection>
                                        <MenuItem Header="Manage Extensions" Icon="&#xe9a4;" Click="ButtonAction" Tag="5&lt;,&gt;chrome://extensions"/>
                                        <Separator/>
                                        <CollectionContainer x:Name="ExtensionsMenu"/>
                                    </CompositeCollection>
                                </ContextMenu.ItemsSource>
                                <ContextMenu.ItemContainerStyle>
                                    <Style TargetType="MenuItem">
                                        <Setter Property="Icon" Value="&#xEA86;"/>
                                        <Setter Property="Header" Value="{Binding Name}"/>
                                        <Setter Property="Tag" Value="{Binding ID}"/>
                                        <EventSetter Event="Click" Handler="LoadExtensionPopup"/>
                                    </Style>
                                </ContextMenu.ItemContainerStyle>-->
                                <ContextMenu.ItemContainerStyle>
                                    <Style TargetType="MenuItem">
                                        <Setter Property="Icon" Value="&#xEA86;"/>
                                        <Setter Property="Header" Value="{Binding Name}"/>
                                        <Setter Property="Tag" Value="{Binding ID}"/>
                                        <EventSetter Event="Click" Handler="LoadExtensionPopup"/>
                                    </Style>
                                </ContextMenu.ItemContainerStyle>
                            </ContextMenu>
                        </WinUI:DropDownButton.Menu>
                    </WinUI:DropDownButton>
                    <!--<Button Click="ButtonAction" BorderThickness="0" Visibility="Collapsed" Tag="12&lt;,&gt;{CurrentUrl}" x:Name="OpenFileExplorerButton" DockPanel.Dock="Right" Margin="0,0,5,0" Style="{StaticResource ToolBarIconButton}" ToolTip="Open in File Explorer" Content="&#xEC50;"/>-->
                    <!--<Button Click="ButtonAction" BorderThickness="0" Visibility="Visible" Tag="23" x:Name="RSSFeedButton" DockPanel.Dock="Right" Margin="0,0,5,0" Style="{StaticResource IconButton}" ToolTip="RSS Feed" Background="#FC7E00" Content="&#xe874;" FontSize="30">
                        <Button.Resources>
                            <Style TargetType="{x:Type ContentPresenter}">
                                <Setter Property="RenderTransformOrigin" Value="0.525,0.525"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <RotateTransform CenterX="0" CenterY="0" Angle="45"/>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Resources>
                    </Button>-->
                    <!--<Button Click="ButtonAction" BorderThickness="0" Visibility="Visible" Tag="23" x:Name="RSSFeedButton" DockPanel.Dock="Right" Margin="0,0,5,0" Style="{StaticResource IconButton}" ToolTip="RSS Feed" Foreground="#FC7E00" Content="&#xe874;" FontSize="30">
                        <Button.Resources>
                            <Style TargetType="{x:Type ContentPresenter}">
                                <Setter Property="RenderTransformOrigin" Value="0.525,0.525"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <RotateTransform CenterX="0" CenterY="0" Angle="45"/>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Resources>
                    </Button>-->

                    <WinUI:PopupButton BorderThickness="0" Visibility="Collapsed" x:Name="TranslateButton" DockPanel.Dock="Right" Margin="0,0,5,0" Style="{StaticResource ToolBarPopupIconButton}" ToolTip="Translate" Content="&#xE8C1;">
                        <WinUI:PopupButton.PopupContent>

                            <Border Width="250" Background="{StaticResource PrimaryBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="5" Padding="10">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <DockPanel Grid.ColumnSpan="2" Margin="0,0,0,10" Height="Auto">
                                        <TextBlock FontSize="18" FontFamily="{StaticResource IconFontFamily}" Margin="0,0,5,0">&#xE8C1;</TextBlock>
                                        <Label Margin="0" Padding="0" FontWeight="Medium" FontSize="14">Translate Page</Label>
                                    </DockPanel>
                                    <StackPanel Grid.ColumnSpan="2" Grid.Row="1" Margin="0,0,0,10">
                                        <TextBlock TextTrimming="CharacterEllipsis" Text="Translate to" Margin="0,0,0,5"/>
                                        <ComboBox Width="Auto" x:Name="TranslateComboBox"/>
                                    </StackPanel>
                                    <Button Click="ButtonAction" Grid.Column="0" Margin="0,0,5,0" Width="Auto" Tag="59&lt;,&gt;0" Grid.Row="2">Translate</Button>
                                    <Button Click="ButtonAction" Grid.Column="1" Margin="5,0,0,0" Width="Auto" Tag="59&lt;,&gt;1" Grid.Row="2">Show original</Button>

                                    <Grid x:Name="TranslateLoadingPanel" Visibility="Collapsed" Grid.ColumnSpan="2" Grid.RowSpan="3" Background="{StaticResource PrimaryBrush}">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="10"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>
                                        <TextBlock RenderTransformOrigin="0.5,0.5" Padding="0,0,0,0" FontSize="25px" FontFamily="{StaticResource IconFontFamily}" FontWeight="UltraLight" Text="&#xF16A;" TextAlignment="Center" Foreground="{StaticResource FontBrush}" HorizontalAlignment="Center" VerticalAlignment="Bottom">
                                            <TextBlock.RenderTransform>
                                                <RotateTransform/>
                                            </TextBlock.RenderTransform>
                                            <TextBlock.Resources>
                                                <Storyboard x:Key="TranslateSpinStoryboard" RepeatBehavior="Forever">
                                                    <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(RotateTransform.Angle)" From="0" To="360" Duration="0:0:2"/>
                                                </Storyboard>
                                            </TextBlock.Resources>
                                            <TextBlock.Triggers>
                                                <EventTrigger RoutedEvent="TextBlock.Loaded">
                                                    <BeginStoryboard Storyboard="{StaticResource TranslateSpinStoryboard}" x:Name="TranslateTriggerSpinStoryboard"/>
                                                </EventTrigger>
                                            </TextBlock.Triggers>
                                        </TextBlock>
                                        <TextBlock Grid.Row="2" VerticalAlignment="Top" HorizontalAlignment="Center" TextTrimming="CharacterEllipsis" Text="Translating" Margin="0,0,0,5"/>
                                    </Grid>
                                </Grid>
                            </Border>
                        </WinUI:PopupButton.PopupContent>
                    </WinUI:PopupButton>
                    <Button Click="ButtonAction" BorderThickness="0" Visibility="Collapsed" Tag="17" x:Name="ReaderModeButton" DockPanel.Dock="Right" Margin="0,0,5,0" Style="{StaticResource ToolBarIconButton}" ToolTip="Reader Mode" Content="&#xF000;"/>
                    <Button Click="ButtonAction" BorderThickness="0" Visibility="Collapsed" Tag="56" x:Name="InstallWebAppButton" DockPanel.Dock="Right" Margin="0,0,5,0" Style="{StaticResource ToolBarIconButton}" ToolTip="Install Web App" Content="&#xe74c;"/>
                    <Button Click="ButtonAction" BorderThickness="0" Tag="12" DockPanel.Dock="Right" Margin="0,0,5,0" Style="{StaticResource ToolBarIconButton}" ToolTip="Add to favourites" x:Name="FavouriteButton" Content="&#xEB51;"/>

                    <Grid Width="Auto" Margin="0,0,5,0" Height="35" x:Name="OmniBoxContainer" MouseEnter="OmniBoxContainer_MouseEnter" MouseLeave="OmniBoxContainer_MouseLeave" Background="{StaticResource PrimaryBrush}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Border x:Name="OmniBoxBorder" Grid.ColumnSpan="2" Width="Auto" Margin="0" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="5" Height="35" Padding="0"/>
                        <Border x:Name="SiteInformationPanel" Background="{StaticResource SecondaryBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" MinWidth="25" Width="Auto" CornerRadius="5" Margin="4">
                            <Grid>
                                <DockPanel Margin="4.25">
                                    <TextBlock DockPanel.Dock="Left" RenderTransformOrigin="0.5,0.5" x:Name="SiteInformationIcon" Padding="0,0,0,0" Width="16px" FontFamily="{StaticResource IconFontFamily}" FontWeight="UltraLight" FontSize="14" Text="&#xF16A;" TextAlignment="Center" Foreground="{StaticResource FontBrush}" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock.RenderTransform>
                                            <RotateTransform x:Name="NoFreeze"/>
                                        </TextBlock.RenderTransform>
                                        <TextBlock.Resources>
                                            <Storyboard x:Key="LoadingAnimation" Storyboard.TargetName="SiteInformationIcon">
                                                <DoubleAnimation Storyboard.TargetProperty="(TextBlock.RenderTransform).(RotateTransform.Angle)" To="360" Duration="0:0:2" RepeatBehavior="Forever" />
                                            </Storyboard>
                                        </TextBlock.Resources>
                                    </TextBlock>
                                    <TextBlock DockPanel.Dock="Right" x:Name="SiteInformationText" Visibility="Collapsed" Margin="5,0,0,0" Text="-" TextAlignment="Center" Foreground="{StaticResource FontBrush}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </DockPanel>
                                <WinUI:PopupButton x:Name="SiteInformationPopupButton" Width="Auto" Height="Auto" Background="Transparent" Opacity="0" BorderThickness="0" Style="{StaticResource PopupIconButton}">
                                    <WinUI:PopupButton.PopupContent>
                                        <Border Width="300" Padding="10" Background="{StaticResource PrimaryBrush}" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="5">
                                            <StackPanel>
                                                <DockPanel>
                                                    <Border Width="35" Height="35" Margin="0,0,10,0" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource PrimaryBrush}" CornerRadius="5">
                                                        <TextBlock VerticalAlignment="Center" x:Name="SiteInformationPopupIcon" HorizontalAlignment="Center" FontFamily="{StaticResource IconFontFamily}" TextAlignment="Center" FontSize="18" Text="&#xE72E;"/>
                                                    </Border>
                                                    <TextBlock VerticalAlignment="Center" x:Name="SiteInformationPopupText" Text="Connection is secure"/>
                                                </DockPanel>
                                                <StackPanel Margin="0,10,0,0" x:Name="AdBlockContainer">
                                                    <Separator Margin="0,0,0,10" Background="{StaticResource BorderBrush}"/>
                                                    <DockPanel>
                                                        <Border Width="35" Height="35" Margin="0,0,10,0" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource PrimaryBrush}" CornerRadius="5">
                                                            <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" FontFamily="{StaticResource IconFontFamily}" TextAlignment="Center" FontSize="18" Text="&#xea18;"/>
                                                        </Border>
                                                        <ToggleButton x:Name="AdBlockToggleButton" Click="AdBlockToggleButton_Click" DockPanel.Dock="Right"/>
                                                        <StackPanel VerticalAlignment="Center">
                                                            <TextBlock Text="Block ads &amp; trackers on:"/>
                                                            <TextBlock x:Name="AdBlockHostText" Foreground="{StaticResource GrayBrush}"/>
                                                        </StackPanel>
                                                    </DockPanel>
                                                </StackPanel>
                                                <StackPanel Margin="0,10,0,0" x:Name="SiteInformationCertificate">
                                                    <Separator Margin="0,0,0,10" Background="{StaticResource BorderBrush}"/>
                                                    <DockPanel>
                                                        <Border Width="35" Height="35" Margin="0,0,10,0" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource PrimaryBrush}" CornerRadius="5">
                                                            <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" FontFamily="{StaticResource IconFontFamily}" TextAlignment="Center" FontSize="18" Text="&#xEB95;"/>
                                                        </Border>
                                                        <TextBlock x:Name="CertificateValidation" VerticalAlignment="Center" Text="Certificate is valid"/>
                                                    </DockPanel>
                                                    <Expander x:Name="CertificateInfo" Margin="0,10,0,0">
                                                        <Expander.Header>
                                                            Certificate
                                                        </Expander.Header>
                                                        <StackPanel>
                                                            <TextBlock Margin="0,0,0,10" VerticalAlignment="Center" Text="Issued to" FontWeight="Bold"/>
                                                            <StackPanel Orientation="Horizontal" Margin="10,0,0,10">
                                                                <TextBlock Text="Common Name:" Width="125"/>
                                                                <TextBlock x:Name="IssueToCommonName" Text="google.com"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal" Margin="10,0,0,10">
                                                                <TextBlock Text="Company:" Width="125"/>
                                                                <TextBlock x:Name="IssueToCompany" Text=""/>
                                                            </StackPanel>
                                                            <TextBlock Margin="0,0,0,10" VerticalAlignment="Center" Text="Issued by" FontWeight="Bold"/>
                                                            <StackPanel Orientation="Horizontal" Margin="10,0,0,10">
                                                                <TextBlock Text="Common Name:" Width="125"/>
                                                                <TextBlock x:Name="IssueByCommonName" Text="WR2"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal" Margin="10,0,0,10">
                                                                <TextBlock Text="Company:" Width="125"/>
                                                                <TextBlock x:Name="IssueByCompany" Text="Google Trust Services"/>
                                                            </StackPanel>
                                                            <TextBlock Margin="0,0,0,10" VerticalAlignment="Center" Text="Validity period" FontWeight="Bold"/>
                                                            <StackPanel Orientation="Horizontal" Margin="10,0,0,10">
                                                                <TextBlock Text="Start:" Width="125"/>
                                                                <TextBlock x:Name="CertificateStart" Text="12/09/2024"/>
                                                            </StackPanel>
                                                            <StackPanel Orientation="Horizontal" Margin="10,0,0,10">
                                                                <TextBlock Text="End:" Width="125"/>
                                                                <TextBlock x:Name="CertificateEnd" Text="03/03/2025"/>
                                                            </StackPanel>
                                                        </StackPanel>
                                                    </Expander>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </WinUI:PopupButton.PopupContent>
                                </WinUI:PopupButton>
                            </Grid>
                        </Border>
                        <TextBlock Grid.Column="1" IsHitTestVisible="False" Text="Search or type a URL" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0" Foreground="{StaticResource BorderBrush}" x:Name="OmniBoxPlaceholder" Visibility="Visible"/>
                        <ComboBox TextSearch.TextPath="Text" IsTextSearchEnabled="False" StaysOpenOnEdit="True" VirtualizingPanel.IsVirtualizing="True" VirtualizingPanel.VirtualizationMode="Recycling" IsSynchronizedWithCurrentItem="False" DropDownOpened="OmniBox_DropDownOpened" DropDownClosed="OmniBox_DropDownClosed" Style="{StaticResource DropDownTextBox}" BorderThickness="0" Text="" Grid.Column="1" Height="Auto" BorderBrush="Transparent" Margin="0" Background="Transparent" Tag="Loading" PreviewKeyUp="OmniBox_PreviewKeyUp" PreviewKeyDown="OmniBox_PreviewKeyDown" IsKeyboardFocusWithinChanged="OmniBox_IsKeyboardFocusWithinChanged" x:Name="OmniBox" Padding="0" Width="Auto" HorizontalAlignment="Stretch">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Focusable="False" Orientation="Horizontal" Margin="0">
                                        <Border Margin="-8,0,5,0" Width="30" Height="30" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="5" Background="{StaticResource PrimaryBrush}">
                                            <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" FontFamily="{StaticResource IconFontFamily}" TextAlignment="Center" FontSize="18" Text="{Binding Icon}" Foreground="{Binding Color}"/>
                                        </Border>
                                        <TextBlock Text="{Binding Text}" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                        <TextBlock Text="{Binding Result}" Foreground="{StaticResource GrayBrush}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                        <Grid x:Name="OmniBoxStatus" Grid.Column="1" IsHitTestVisible="False" VerticalAlignment="Stretch" HorizontalAlignment="Right" Margin="5" Visibility="Visible">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource GrayBrush}" x:Name="OmniBoxStatusText"/>
                            <Border x:Name="OmniBoxStatusKey" Grid.Column="1" Background="{StaticResource SecondaryBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Width="Auto" CornerRadius="5">
                                <TextBlock x:Name="OmniBoxStatusKeyText" Text="Tab" VerticalAlignment="Center" Margin="5" HorizontalAlignment="Center" Foreground="{StaticResource FontBrush}"/>
                            </Border>
                        </Grid>
                    </Grid>
                </DockPanel>
                <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1" x:Name="FavouriteContainer" Margin="0" Padding="0" MinHeight="5" Height="41.25" Grid.Row="1" HorizontalAlignment="Stretch">
                    <ScrollViewer FontFamily="None" x:Name="FavouriteScrollViewer" Margin="5,0,5,5" VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Hidden" PreviewMouseWheel="FavouriteScrollViewer_PreviewMouseWheel">
                        <ItemsControl x:Name="FavouritesPanel" HorizontalAlignment="Stretch" ItemsSource="{Binding Favourites}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <DockPanel x:Name="FavouriteDockPanel" IsItemsHost="True" Margin="0" HorizontalAlignment="Left"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Button MaxWidth="150" Width="Auto" BorderBrush="Transparent" HorizontalContentAlignment="Left" Padding="5" VerticalContentAlignment="Center" ToolTip="{Binding Tooltip}" Margin="0,0,5,0" MouseUp="FavouriteButton_MouseUp" Click="ButtonAction" Tag="{Binding Arguments}" Height="30" Content="{Binding Name}">
                                        <Button.Resources>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="TextTrimming" Value="CharacterEllipsis"></Setter>
                                                <Setter Property="MaxWidth" Value="150"></Setter>
                                            </Style>
                                        </Button.Resources>
                                    </Button>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Border>

        <Grid x:Name="WebContainer" Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="SideBarColumnLeft" Width="Auto" MaxWidth="1750px"/>
                <ColumnDefinition/>
                <ColumnDefinition x:Name="SideBarColumnRight" Width="Auto" MaxWidth="1750px"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition x:Name="SideBarRowTop" Height="Auto" MaxHeight="800px"/>
                <RowDefinition/>
                <RowDefinition x:Name="SideBarRowBottom" Height="Auto" MaxHeight="800px"/>
            </Grid.RowDefinitions>

            <Grid x:Name="CoreContainerSizeEmulator" SizeChanged="CoreContainer_SizeChanged" Grid.Column="1" Grid.Row="1" Margin="0,0,0,0" Grid.IsSharedSizeScope="True">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="SizeEmulatorColumn1" SharedSizeGroup="A" Width="Auto" MaxWidth="25"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition x:Name="SizeEmulatorColumn2" SharedSizeGroup="A" Width="Auto" MaxWidth="25"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition x:Name="SizeEmulatorRow1" SharedSizeGroup="B" Height="Auto" MaxHeight="400"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition x:Name="SizeEmulatorRow2" SharedSizeGroup="B" Height="Auto" MaxHeight="400"/>
                </Grid.RowDefinitions>
                <Grid x:Name="CoreContainer" Margin="0,0,0,0" Grid.Column="2" Grid.Row="2"/>
                <GridSplitter x:Name="SizeEmulatorRowSplitter1" Visibility="Collapsed" Grid.Row="1" Height="5" HorizontalAlignment="Stretch" Grid.ColumnSpan="5" Background="{StaticResource BorderBrush}"/>
                <GridSplitter x:Name="SizeEmulatorRowSplitter2" Visibility="Collapsed" Grid.Row="3" Height="5" HorizontalAlignment="Stretch" Grid.ColumnSpan="5" Background="{StaticResource BorderBrush}"/>

                <GridSplitter x:Name="SizeEmulatorColumnSplitter1" Visibility="Collapsed" Grid.Column="1" Grid.RowSpan="5" Width="5" Background="{StaticResource BorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Stretch"/>
                <GridSplitter x:Name="SizeEmulatorColumnSplitter2" Visibility="Collapsed" Grid.Column="3" Grid.RowSpan="5" Width="5" Background="{StaticResource BorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Stretch"/>
            </Grid>
            <Border x:Name="SideBar" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1,0,0,0" Visibility="Collapsed" Width="Auto" Height="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="2" Grid.Row="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1">
                        <DockPanel LastChildFill="False" Margin="5">
                            <Button Style="{StaticResource IconButton}" DockPanel.Dock="Right" Foreground="Red" Click="ButtonAction" Tag="22" Margin="0" ToolTip="Close" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Content="&#xF78A;"/>
                            <DockPanel LastChildFill="False" x:Name="DevToolsToolBar">
                                <!--<Button Style="{StaticResource IconButton}" DockPanel.Dock="Right" Click="ButtonAction" Tag="15&lt;,&gt;{CurrentInspectorUrl}" Margin="0,0,5,0" ToolTip="Open in seperate window" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Content="&#xE8A7;"/>-->
                                <Button Style="{StaticResource IconButton}" DockPanel.Dock="Left" Click="ButtonAction" Tag="10" Margin="0,0,5,0" ToolTip="Toggle size emulation" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Content="&#xE8CC;"/>
                                <Border DockPanel.Dock="Left" Width="1" Background="{StaticResource BorderBrush}" Margin="0,5,5,5"/>
                            </DockPanel>
                            <ComboBox Width="55" SelectedIndex="3" ToolTip="Dock side" x:Name="SideBarDockDropdown" SelectionChanged="InspectorDockDropdown_SelectionChanged">
                                <ComboBoxItem ToolTip="Top">
                                    <TextBlock FontFamily="{StaticResource IconFontFamily}" FontSize="18" FontWeight="Normal" TextAlignment="Center" RenderTransformOrigin="0.5,0.5" Text="&#xE90E;">
                                        <TextBlock.RenderTransform>
                                            <RotateTransform Angle="180"/>
                                        </TextBlock.RenderTransform>
                                    </TextBlock>
                                </ComboBoxItem>
                                <ComboBoxItem ToolTip="Bottom">
                                    <TextBlock FontFamily="{StaticResource IconFontFamily}" FontSize="18" FontWeight="Normal" TextAlignment="Center" Text="&#xE90E;"/>
                                </ComboBoxItem>
                                <ComboBoxItem ToolTip="Left">
                                    <TextBlock FontFamily="{StaticResource IconFontFamily}" FontSize="18" FontWeight="Normal" TextAlignment="Center" Text="&#xE90C;"/>
                                </ComboBoxItem>
                                <ComboBoxItem ToolTip="Right">
                                    <TextBlock FontFamily="{StaticResource IconFontFamily}" FontSize="18" FontWeight="Normal" TextAlignment="Center" Text="&#xE90D;"/>
                                </ComboBoxItem>
                            </ComboBox>
                            <!--<ComboBox FontFamily="None" Width="Auto" ToolTip="Browser Emulator" Foreground="{StaticResource FontBrush}" x:Name="BrowserEmulatorComboBox" VerticalAlignment="Center" SelectedIndex="0"/>-->
                        </DockPanel>
                    </Border>
                    <Grid x:Name="SideBarCoreContainer" Grid.Row="1"/>
                </Grid>
            </Border>
            <GridSplitter x:Name="SideBarColumnSplitterRight" Visibility="Collapsed" Grid.Column="2" Grid.Row="1" Width="5" Background="Transparent" HorizontalAlignment="Left" VerticalAlignment="Stretch"/>
            <GridSplitter x:Name="SideBarColumnSplitterLeft" Visibility="Collapsed" Grid.Column="0" Grid.Row="1" Width="5" Background="Transparent" HorizontalAlignment="Right" VerticalAlignment="Stretch"/>
            <GridSplitter x:Name="SideBarRowSplitterTop" Visibility="Collapsed" Grid.Column="1" Grid.Row="0" Height="5" Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Bottom"/>
            <GridSplitter x:Name="SideBarRowSplitterBottom" Visibility="Collapsed" Grid.Column="1" Grid.Row="2" Height="5" Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Top"/>

            <Grid Grid.Row="1" Grid.Column="1" IsHitTestVisible="False" Focusable="False" x:Name="StatusBar" Margin="5,37.5" VerticalAlignment="Bottom">
                <Popup SnapsToDevicePixels="True" x:Name="StatusBarPopup" Placement="RelativePoint" IsHitTestVisible="False" Focusable="False" AllowsTransparency="True" IsOpen="False" PopupAnimation="Fade">
                    <Border Background="{StaticResource PrimaryBrush}" IsHitTestVisible="False" Focusable="False" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="5">
                        <Grid IsHitTestVisible="False" Focusable="False" MaxWidth="300">
                            <TextBlock IsHitTestVisible="False" x:Name="StatusMessage" Margin="7.5" FontFamily="None" TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" Foreground="{StaticResource FontBrush}"/>
                        </Grid>
                    </Border>
                </Popup>
            </Grid>

            <!--<Grid Grid.Row="1" Grid.Column="1" IsHitTestVisible="False" Margin="5,5" Focusable="False" x:Name="ExtensionsBar" VerticalAlignment="Top" HorizontalAlignment="Right">
                <Popup SnapsToDevicePixels="True" x:Name="ExtensionsPopup" Placement="RelativePoint" IsHitTestVisible="False" Focusable="False" AllowsTransparency="True" IsOpen="True" PopupAnimation="Fade">
                    <Border Background="{StaticResource PrimaryBrush}" IsHitTestVisible="False" Focusable="False" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="5">
                        <StackPanel Margin="5" Width="150">
                            <DockPanel>
                                <Image RenderOptions.BitmapScalingMode="Fant" VerticalAlignment="Center" HorizontalAlignment="Left" Height="25" Width="25" Margin="1.5,0,0,0" Stretch="Uniform">
                                    <Image.Source>
                                        <DrawingImage>
                                            <DrawingImage.Drawing>
                                                <GeometryDrawing>
                                                    <GeometryDrawing.Brush>
                                                        <VisualBrush Stretch="Uniform">
                                                            <VisualBrush.Visual>
                                                                <TextBlock FontFamily="{StaticResource IconFontFamily}" Text="&#xEA86;"/>
                                                            </VisualBrush.Visual>
                                                        </VisualBrush>
                                                    </GeometryDrawing.Brush>
                                                    <GeometryDrawing.Geometry>
                                                        <RectangleGeometry Rect="0,0,20,20"/>
                                                    </GeometryDrawing.Geometry>
                                                </GeometryDrawing>
                                            </DrawingImage.Drawing>
                                        </DrawingImage>-->
                                        <!--<BitmapImage DecodePixelWidth="50" UriSource="https://weblog.west-wind.com/images/rick175x175.jpg"/>-->
                                    <!--</Image.Source>
                                </Image>
                                <TextBlock Foreground="{StaticResource FontBrush}" HorizontalAlignment="Left" VerticalAlignment="Center" TextTrimming="CharacterEllipsis" Text="Extension" Margin="5,0,0,0"/>
                            </DockPanel>
                        </StackPanel>
                    </Border>
                </Popup>
            </Grid>-->
            <Grid Grid.Row="1" Grid.Column="1" x:Name="FindBar" Margin="5" VerticalAlignment="Top" HorizontalAlignment="Right">
                <Popup SnapsToDevicePixels="True" x:Name="FindPopup" Placement="RelativePoint" AllowsTransparency="True" IsOpen="False" PopupAnimation="Slide">
                    <Border Background="{StaticResource PrimaryBrush}" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="5">
                        <DockPanel Margin="5">
                            <TextBox x:Name="FindTextBox" GotKeyboardFocus="FindTextBox_GotKeyboardFocus" KeyUp="FindTextBox_KeyUp" Width="200" Margin="0,0,5,0"/>
                            <Button x:Name="PreviousFindButton" Click="FindButton_Click" Style="{StaticResource IconButton}" Content="&#xe70e;" Margin="0,0,5,0" ToolTip="Previous"/>
                            <Button x:Name="NextFindButton" Click="FindButton_Click" Style="{StaticResource IconButton}" Content="&#xe70d;" Margin="0,0,5,0" ToolTip="Next"/>
                            <Button Click="FindButton_Click" Style="{StaticResource IconButton}" Content="&#xF78A;" ToolTip="Close"/>
                        </DockPanel>
                    </Border>
                </Popup>
            </Grid>
            <Border x:Name="WebContainerBorder" BorderBrush="{StaticResource BorderBrush}" Grid.ColumnSpan="10" Grid.RowSpan="10" BorderThickness="0" IsHitTestVisible="False"/>
        </Grid>
    </Grid>
</UserControl>
