<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" class="StretchToOneHundred">
<head>
    <meta charset="utf-8" />
    <title>New Tab</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
    <!--<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons">-->
</head>
<body>
    <div class="Center NewTabSearchContainer">
        <div>
            <h1 class="Center">SLBr</h1>
            <div class="Search">
                <div class="SearchInput">
                    <!--<span class="material-icons">search</span>-->
                    <input type="text" id="SearchField" />
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        document.getElementById('SearchField').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                search(document.getElementById("SearchField").value);
            }
        });
        async function search(value) {
            await CefSharp.BindObjectAsync("slbr");

            var retval = slbr.searchProviderPrefix();

            retval.then(function (spp) {
                //alert(spp);
                window.location.href = spp.replace("{0}", value).replace(" ", "+");
                //slbr.showMessage(spp.replace("{0}", value).replace(" ", "+"), "", "");
            });
        };
                /*(async function () {
        await CefSharp.BindObjectAsync("slbr");
        //document.getElementById("SearchField").value = "SLBr Hehe";
        //search(document.getElementById("SearchField").value);
})();*/
    </script>
</body>
</html>